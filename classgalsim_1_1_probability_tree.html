<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>GalSim: galsim::ProbabilityTree&lt; FluxData &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GalSim
   &#160;<span id="projectnumber">0.4.1</span>
   </div>
   <div id="projectbrief">The modular galaxy image simulation toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegalsim.html">galsim</a></li><li class="navelem"><a class="el" href="classgalsim_1_1_probability_tree.html">ProbabilityTree</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">galsim::ProbabilityTree&lt; FluxData &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to build binary tree for random draw among objects with known probabilities.  
 <a href="classgalsim_1_1_probability_tree.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_probability_tree_8h_source.html">ProbabilityTree.h</a>&gt;</code></p>

<p><a href="classgalsim_1_1_probability_tree-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>Element</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A private class that wraps the members in their tree information. <br/></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>FluxCompare</b></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Comparison class to sort inputs in <em>descending</em> flux order. <br/></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a783c8a2a9ab81ec815fb08b622774b0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_probability_tree.html#a783c8a2a9ab81ec815fb08b622774b0f">ProbabilityTree</a> ()</td></tr>
<tr class="memdesc:a783c8a2a9ab81ec815fb08b622774b0f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor - nothing to do.  <a href="#a783c8a2a9ab81ec815fb08b622774b0f"></a><br/></td></tr>
<tr class="memitem:aaef2efcfea188023a0ae116fcb0d7681"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_probability_tree.html#aaef2efcfea188023a0ae116fcb0d7681">~ProbabilityTree</a> ()</td></tr>
<tr class="memdesc:aaef2efcfea188023a0ae116fcb0d7681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor - kill the <code>Element</code>s that have been stored away.  <a href="#aaef2efcfea188023a0ae116fcb0d7681"></a><br/></td></tr>
<tr class="memitem:a545bfc975e3c563380fa9b321cde62d8"><td class="memItemLeft" align="right" valign="top">const FluxData *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_probability_tree.html#a545bfc975e3c563380fa9b321cde62d8">find</a> (double &amp;unitRandom) const </td></tr>
<tr class="memdesc:a545bfc975e3c563380fa9b321cde62d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Choose a member of the tree based on a uniform deviate.  <a href="#a545bfc975e3c563380fa9b321cde62d8"></a><br/></td></tr>
<tr class="memitem:aea01c28fb02a5ac7671aefb1dbbe687e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgalsim_1_1_probability_tree.html#aea01c28fb02a5ac7671aefb1dbbe687e">buildTree</a> (double threshold=0.)</td></tr>
<tr class="memdesc:aea01c28fb02a5ac7671aefb1dbbe687e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct the tree from current vector elements.  <a href="#aea01c28fb02a5ac7671aefb1dbbe687e"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><h3>template&lt;class FluxData&gt;<br/>
class galsim::ProbabilityTree&lt; FluxData &gt;</h3>

<p>Class to build binary tree for random draw among objects with known probabilities. </p>
<p>The class is derived from a vector of objects of any type FluxData. The class FluxData can be anything that has a <code>getFlux()</code> call. The absolute value of the return from <code>getFlux()</code> is taken as the relative probability that should be assigned to this member of the vector. The purpose of this class is to select a member of the vector given a uniform random number in the interval [0,1). This is what the <code><a class="el" href="classgalsim_1_1_probability_tree.html#a545bfc975e3c563380fa9b321cde62d8" title="Choose a member of the tree based on a uniform deviate.">find()</a></code> member does.</p>
<p>This works by creating a binary search tree with less-probable members being at successively deeper levels of the tree. Each member is assigned an interval of the cumulative probability (a.k.a. flux) distribution, in the order of walking the tree, and the <code><a class="el" href="classgalsim_1_1_probability_tree.html#a545bfc975e3c563380fa9b321cde62d8" title="Choose a member of the tree based on a uniform deviate.">find()</a></code> method simply descends the tree looking for the interval containing the specified random number.</p>
<p>To use the class, just append your members to this class using the std::vector methods. Then call <code><a class="el" href="classgalsim_1_1_probability_tree.html#aea01c28fb02a5ac7671aefb1dbbe687e" title="Construct the tree from current vector elements.">buildTree()</a></code>, optionally specifying a minimum level of flux for members to be retained in the tree (default is that any non-zero member is in). The <code><a class="el" href="classgalsim_1_1_probability_tree.html#a545bfc975e3c563380fa9b321cde62d8" title="Choose a member of the tree based on a uniform deviate.">find()</a></code> method will now return random draws with near-optimal speed. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a783c8a2a9ab81ec815fb08b622774b0f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class FluxData&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgalsim_1_1_probability_tree.html">galsim::ProbabilityTree</a>&lt; FluxData &gt;::<a class="el" href="classgalsim_1_1_probability_tree.html">ProbabilityTree</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor - nothing to do. </p>

</div>
</div>
<a class="anchor" id="aaef2efcfea188023a0ae116fcb0d7681"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class FluxData&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgalsim_1_1_probability_tree.html">galsim::ProbabilityTree</a>&lt; FluxData &gt;::~<a class="el" href="classgalsim_1_1_probability_tree.html">ProbabilityTree</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor - kill the <code>Element</code>s that have been stored away. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="aea01c28fb02a5ac7671aefb1dbbe687e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class FluxData&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classgalsim_1_1_probability_tree.html">galsim::ProbabilityTree</a>&lt; FluxData &gt;::buildTree </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>threshold</em> = <code>0.</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct the tree from current vector elements. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">threshold</td><td>that have flux &lt;= this value are not included in the tree. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a545bfc975e3c563380fa9b321cde62d8"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class FluxData&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">const FluxData* <a class="el" href="classgalsim_1_1_probability_tree.html">galsim::ProbabilityTree</a>&lt; FluxData &gt;::find </td>
          <td>(</td>
          <td class="paramtype">double &amp;&#160;</td>
          <td class="paramname"><em>unitRandom</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Choose a member of the tree based on a uniform deviate. </p>
<p>The parameter unitRandom must be a uniform deviate in [0,1) interval. On output this parameter is replaced by another random value that is nominally in [0,1) interval (may be outside due to rounding errors), which is actually the fraction of the winning member's flux that was "inside" the point where the cumulative flux was equal to input unitRandom.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">unitRandom</td><td>On input, a random number between 0 and 1. On output, holds a new uniform deviate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Pointer to the selected tree member. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/galsim/<a class="el" href="_probability_tree_8h_source.html">ProbabilityTree.h</a></li>
</ul>
</div><!-- contents -->
<hr class="footer"/><address class="footer"><small>
Generated for GalSim by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1</small></address>
</body>
</html>
